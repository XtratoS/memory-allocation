(this["webpackJsonpmemory-alloc"]=this["webpackJsonpmemory-alloc"]||[]).push([[0],{23:function(e,t,s){},41:function(e,t,s){},42:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(7),r=s.n(a),o=(s(22),s(23),s(4)),i=s(3),l=s(10),m=s(1);function j(e){var t=Object(n.useState)("0"),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)("1"),o=Object(i.a)(r,2),l=o[0],j=o[1],u=function(){var t=parseInt(c),s=parseInt(l);if(isNaN(t)||isNaN(s))return alert("You must insert a valid hole parameters"),!1;!0===e.submitHole(t,s)&&(a("0"),j("1"))};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"h4",children:"Insert Hole"}),Object(m.jsxs)("div",{className:"my-4",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"holeStart",children:"Starting Address"}),Object(m.jsx)("input",{id:"holeStart",className:"form-control",type:"number",min:0,value:c,ref:e.autoFocusCallbackRef,onChange:function(e){if(parseInt(e.target.value)<0)return!1;a(e.target.value)}})]}),Object(m.jsxs)("div",{className:"mb-4",children:[Object(m.jsx)("label",{className:"form-label",htmlFor:"holeSize",children:"Size"}),Object(m.jsx)("input",{id:"holeSize",className:"form-control",type:"number",min:1,value:l,onChange:function(e){if(parseInt(e.target.value)<1)return!1;j(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&u()}})]}),Object(m.jsx)("button",{className:"btn btn-primary",onClick:u,children:"Insert Hole"})]})}function u(e){var t=Object(n.useState)(e.segment.name),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)(e.segment.size),o=Object(i.a)(r,2),l=o[0],j=o[1];Object(n.useEffect)((function(){a(e.segment.name),j(e.segment.size)}),[e.segment]);var u=function(){""!==c&&""!==l?e.setSegment({name:c,size:parseInt(l)}):alert("Invalid values for segment parameters")};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"input-group row m-auto mt-3",children:[Object(m.jsxs)("div",{className:"col",children:[Object(m.jsx)("label",{className:"form-label mb-0",htmlFor:"segment-name",children:"Name"}),Object(m.jsx)("input",{id:"segment-name",className:"form-control",type:"text",value:c,onChange:function(e){a(e.target.value)}})]}),Object(m.jsxs)("div",{className:"col",children:[Object(m.jsx)("label",{className:"form-label mb-0",htmlFor:"segment-size",children:"Size"}),Object(m.jsx)("input",{id:"segment-size",className:"form-control",type:"number",min:1,value:l,onChange:function(e){j(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&u()}})]})]}),Object(m.jsx)("div",{className:"row m-auto p-0",children:Object(m.jsxs)("div",{className:"col input-group justify-content-between",children:[Object(m.jsx)("button",{className:"mt-1 btn btn-success w-80",onClick:u,children:"Save Segment"}),Object(m.jsx)("button",{className:"mt-1 btn btn-danger w-20",onClick:e.removeSelf,children:Object(m.jsx)("i",{className:"fas fa-trash-alt"})})]})})]})}function b(e){var t=Object(n.useState)(e.process.name),s=Object(i.a)(t,2),c=s[0],a=s[1];Object(n.useEffect)((function(){}),[e.process]),Object(n.useEffect)((function(){a(e.process.name)}),[e.process]);var r=function(){var t={name:c,segments:Object(o.a)(e.process.segments)};e.updateProcess(t)},l=function(t){var s={name:c,segments:Object(o.a)(t)};e.updateProcess(s)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"h4",children:"Insert/Modify Process"}),Object(m.jsxs)("div",{className:"my-4",children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{className:"mb-3 mx-1 btn btn-primary",onClick:function(){e.addProcess()},disabled:e.holeCount<1,children:"Add Process"}),Object(m.jsx)("button",{className:"mb-3 mx-1 btn btn-danger",onClick:function(){e.removeProcess()},disabled:e.processCount<=1,children:"Deallocate Process"})]}),Object(m.jsx)("label",{className:"form-label",htmlFor:"process-name",children:"Process Name"}),Object(m.jsxs)("div",{className:"input-group",children:[Object(m.jsx)("input",{id:"process-name",className:"form-control",type:"text",value:c,onChange:function(e){a(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),r())},disabled:0===e.holeCount}),Object(m.jsx)("button",{className:"btn btn-success",onClick:r,disabled:0===e.holeCount,children:"Save"})]})]}),Object(m.jsx)("div",{className:"mt-4",children:Object(m.jsx)("button",{className:"btn btn-primary",onClick:function(){var t={name:c,segments:[].concat(Object(o.a)(e.process.segments),[{name:"",size:0}])};e.updateProcess(t)},disabled:0===e.holeCount,children:"Add Segment"})}),e.process.segments.map((function(t,s){return Object(m.jsx)(u,{index:s,segment:t,setSegment:function(t){var n=Object(o.a)(e.process.segments);n[s]=t,l(n)},removeSelf:function(){var t=e.process.segments;t.splice(s,1),l(t)}},s)}))]})}var d=s(14),O=s.n(d);function f(e){var t=Object(n.useState)(!0),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)(!0),o=Object(i.a)(r,2),l=o[0],j=o[1],u=Object(n.useState)("auto"),b=Object(i.a)(u,2),d=b[0],f=b[1],h=Object(n.useState)("auto"),p=Object(i.a)(h,2),v=p[0],g=p[1];Object(n.useEffect)((function(){f(!0===c?"auto":0)}),[c]),Object(n.useEffect)((function(){g(!0===l?"auto":0)}),[l]);var x=0;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"h6 mt-1",children:["Holes\u2003",Object(m.jsx)("span",{style:{cursor:"pointer"},onClick:function(){a(!c)},className:"link-primary",children:c?"[hide]":"[show]"})]}),Object(m.jsx)(O.a,{duration:500,height:d,children:e.holes.map((function(e,t){return Object(m.jsxs)("div",{className:"border border-1 rounded border-secondary",children:[Object(m.jsx)("div",{className:"row m-0 p-0",children:Object(m.jsxs)("div",{className:"col",children:["Hole ",t]})}),Object(m.jsxs)("div",{className:"row m-0 p-0 border-top border-1 border-secondary",children:[Object(m.jsxs)("div",{className:"col",children:["Start: ",e[0]]}),Object(m.jsxs)("div",{className:"col",children:["Size: ",e[1]]})]})]},x++)}))}),Object(m.jsxs)("div",{className:"h6 mt-2",children:["Processes\u2003",Object(m.jsx)("span",{style:{cursor:"pointer"},onClick:function(){j(!l)},className:"link-primary",children:l?"[hide]":"[show]"})]}),Object(m.jsx)(O.a,{duration:500,height:v,children:e.processes.map((function(t,s){return Object(m.jsxs)("div",{className:"border border-1 rounded border-secondary ".concat(e.selectedProcessIndex===s&&"border-light bg-secondary"),onClick:function(){e.selectProcess(s)},style:{cursor:"pointer"},children:[Object(m.jsx)("div",{className:"row m-0 p-0",children:Object(m.jsx)("div",{className:"col",children:t.name||Object(m.jsx)("div",{className:"fs-italic",children:"Unnamed Process"})})}),Object(m.jsx)("div",{className:"row m-0 p-0",children:Object(m.jsxs)("div",{className:"col",children:[t.segments.length," Segments"]})})]},x++)}))})]})}var h=s(5),p=s(17),v="FIRST_FIT",g="BEST_FIT",x="WORST_FIT",N="OLD_PROCESS",S="HOLE",y="NEW_PROCESS",C=480;function k(e){return Object(m.jsx)("div",{className:"m-0 p-0 row text-center justify-content-center align-items-center ".concat(e.type===N?" bg-warning text-dark ":"").concat(e.type===S?"bg-success":"").concat(e.type===y?"bg-primary":""),style:Object(h.a)(Object(h.a)({},e.style),{},{position:"absolute",top:"".concat(e.start,"px"),width:"100%",height:"".concat(e.size,"px"),display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}),children:Object(m.jsxs)("div",{className:"col",style:{position:"relative"},children:[Object(m.jsx)("span",{children:e.text}),Object(m.jsx)(l.a,{backgroundColor:"#dc3545"}),e.type===N&&Object(m.jsx)("span",{"data-tip":"De-allocate",style:{position:"absolute",right:10},onClick:function(){e.deallocateSelf()},children:Object(m.jsx)("i",{className:"fas fa-minus-circle text-danger"})})]})})}var z=s(6),w=function(e,t,s,n,c){var a,r=[],i=[],l=[],m=[],j=[!0,[],[]];s.forEach((function(e,t){e.segments.forEach((function(s){r.push({processIndex:t,name:"".concat(e.name," - ").concat(s.name),size:s.size})}))})),n.forEach((function(e,t){i.push({type:S,name:"Hole ".concat(t),start:e[0],end:e[0]+e[1]})})),i.sort((function(e,t){return e.start-t.start}));for(var u=1;u<i.length;u++){var b=i[u-1],d=i[u];d.start>b.end&&l.push({type:N,name:"Old Process",start:b.end,end:d.start,unfactoredStart:b.end,unfactoredSize:d.start-b.end})}var O=i[0];O&&O.start>0&&l.push({type:N,name:"Old Process",start:0,end:O.start,unfactoredStart:0,unfactoredSize:O.start});var f=i[i.length-1];f&&f.end<e&&l.push({type:N,name:"Old Process",start:f.end,end:e,unfactoredStart:f.end,unfactoredSize:e-f.end});(a={},Object(z.a)(a,v,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=!1,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){for(var l=r.segments[o],u=l.size,b=0;b<c.length;b++){var d=c[b],O=d.end-d.start;if(u<=O){a.push({type:y,name:"".concat(r.name," - ").concat(l.name),start:d.start,end:d.start+u}),u===O?c.splice(b,1):c[b].start+=u,n=!0;break}}if(!1===n){t=!1,j[2].push(r.name);break}}!0===t?(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a))):j[0]=!1}})),Object(z.a)(a,g,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=void 0,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){n=!1;for(var l=r.segments[o],u=l.size,b=null,d=0;d<c.length;d++){var O=c[d],f=O.end-O.start;if(u<=f){if(null===b){b=d,n=!0;continue}var h=c[b];if(f<h.end-h.start){b=d,n=!0;continue}}}if(!1===n){t=!1,j[2].push(r.name);break}var p=c[b],v=p.end-p.start;a.push({type:y,name:"".concat(r.name," - ").concat(l.name),start:p.start,end:p.start+u}),v===u?c.splice(b,1):v>u&&(c[b].start+=u)}!0===t?(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a))):j[0]=!1}})),Object(z.a)(a,x,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=void 0,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){n=!1;for(var l=r.segments[o],u=l.size,b=null,d=0;d<c.length;d++){var O=c[d],f=O.end-O.start;if(u<=f){if(null===b){b=d,n=!0;continue}var h=c[b];if(f>h.end-h.start){b=d,n=!0;continue}}}if(!1===n){t=!1,j[2].push(r.name);break}var p=c[b],v=p.end-p.start;a.push({type:y,name:"".concat(r.name," - ").concat(l.name),start:p.start,end:p.start+u}),v===u?c.splice(b,1):v>u&&(c[b].start+=u)}!0===t?(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a))):j[0]=!1}})),a)[c](),console.log(l,i,m);var p=t/e;return j[1]=[].concat(l,Object(o.a)(i),Object(o.a)(m)).map((function(e){return Object(h.a)(Object(h.a)({},e),{},{start:e.start*p,end:e.end*p})})),j};function J(e){var t=Object(n.useState)(C),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)(null),o=Object(i.a)(r,2),l=o[0],j=o[1],u=Object(n.useState)([]),b=Object(i.a)(u,2),d=b[0],O=b[1];Object(n.useEffect)((function(){if(null!==l){var t=w(e.memorySize,c,e.processes,e.holes,l.value),s=Object(i.a)(t,3),n=s[0],a=s[1],r=s[2];!1===n&&alert("Failed to allocate process(es); ".concat(r.join(" ")," to memory")),O(a)}}),[c,l]),Object(n.useEffect)((function(){j(null)}),[e.memorySize,e.processes,e.holes]);return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(p.a,{value:l,onChange:function(e){j(e)},options:[{value:v,label:"First Fit"},{value:g,label:"Best Fit"},{value:x,label:"Worst Fit"}],styles:{option:function(e){return Object(h.a)(Object(h.a)({},e),{},{color:"black"})},menu:function(e){return Object(h.a)(Object(h.a)({},e),{},{marginTop:2})}},placeholder:"Allocation Method..."}),null!==l&&d.length>0&&Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("div",{className:"my-2 rounded-top",style:{position:"relative",height:"".concat(c,"px"),transition:".5s"},children:d.map((function(t,s){return Object(m.jsx)(k,{index:s,deallocateSelf:function(){var s=[t.unfactoredStart,t.unfactoredSize];console.log(t),e.insertHole(s)},type:t.type,start:t.start,size:t.end-t.start,text:t.name,style:{transition:".5s"}},s)}))}),Object(m.jsx)("div",{onClick:function(){a(c===C?960:C)},children:Object(m.jsx)("i",{style:{width:"100%",cursor:"pointer"},className:"fas fa-arrow-"+(c===C?"down":"up")})})]})]})}function F(){var e=Object(n.useState)("2"),t=Object(i.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)(0),r=Object(i.a)(a,2),u=r[0],d=r[1],O=Object(n.useState)("0"),h=Object(i.a)(O,2),p=(h[0],h[1],Object(n.useState)("1")),v=Object(i.a)(p,2),g=(v[0],v[1],Object(n.useState)([])),x=Object(i.a)(g,2),N=x[0],S=x[1],y=Object(n.useState)([{name:"",segments:[]}]),C=Object(i.a)(y,2),k=C[0],z=C[1],w=Object(n.useState)(0),F=Object(i.a)(w,2),P=F[0],E=F[1],I=Object(n.useCallback)((function(e){e&&e.focus()}),[]),H=function(){var e=parseInt(s);isNaN(e)||d(e)},M=function(e){var t=[].concat(Object(o.a)(N),[e]);S(t)};return Object(n.useEffect)((function(){P>=k.length?E(k.length-1):P<0&&E(0)}),[k,P]),0===u?Object(m.jsxs)("div",{className:"m-4",children:[Object(m.jsx)("label",{htmlFor:"memorySizeInput",className:"form-label mb-4 mw-80px",children:"Memory Size (in bytes)"}),Object(m.jsx)("input",{id:"memorySizeInput",className:"form-control m-auto mb-4 mw-80px w-60",type:"number",ref:I,value:s,onChange:function(e){c(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),H())}}),Object(m.jsx)("button",{className:"btn btn-success",onClick:H,children:"Submit"})]}):Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("div",{className:"row m-0 text-center justify-content-center",children:[Object(m.jsxs)("div",{className:"mt-4 p-0 col-1 d-flex justify-content-center align-items-start",children:[Object(m.jsx)(l.a,{backgroundColor:"#dc3545"}),Object(m.jsxs)("div",{"data-tip":"Memory Size",children:[Object(m.jsx)("i",{className:"fas fa-sd-card"}),Object(m.jsx)("br",{}),u<=1e4?u+" B":u<=1e7?Math.floor(u/1024)+" KB":u<=1e10?Math.floor(u/1024/1024)+" MB":Math.floor(u/1024/1024/1024)+" GB"]})]}),Object(m.jsx)("div",{className:"mt-4 col-5 col-md-3",children:Object(m.jsx)(j,{submitHole:function(e,t){if(e+t>u)return alert("A hole can't extend outside memory"),!1;var s=null;return N.forEach((function(n){var c=Object(i.a)(n,2),a=c[0],r=c[1];e<=a&&e+t>=a&&(s=[a,r]),e>=a&&e<a+r&&(s=[a,r])})),null!=s?(alert("Hole overlaps with hole starting at ".concat(s[0]," with size ").concat(s[1])),!1):(M([e,t]),!0)}})}),Object(m.jsx)("div",{className:"mt-4 col-6 col-md-4",children:Object(m.jsx)(b,{process:k[P]&&k[P]||{name:"",segments:[]},addProcess:function(){var e=[].concat(Object(o.a)(k),[{name:"",segments:[]}]);E(k.length),z(e)},removeProcess:function(){var e=Object(o.a)(k);e.splice(P,1),z(e)},updateProcess:function(e){var t=Object(o.a)(k);t[P]=e,z(t)},holeCount:N.length,processCount:k.length})}),Object(m.jsxs)("div",{className:"mt-4 col-6 col-md-4",children:[Object(m.jsx)("div",{className:"mb-2",children:Object(m.jsx)(f,{memorySize:u,holes:N,processes:k,selectedProcessIndex:P,selectProcess:function(e){E(e)}})}),Object(m.jsx)("div",{className:"mt-2",children:Object(m.jsx)(J,{insertHole:M,memorySize:u,processes:k,holes:N})})]})]})})}s(41);var P=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)("div",{className:"container mw-94 mb-4",children:Object(m.jsx)(F,{})})})};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.4e554d95.chunk.js.map