(this["webpackJsonpmemory-alloc"]=this["webpackJsonpmemory-alloc"]||[]).push([[0],{22:function(e,t,s){},39:function(e,t,s){},40:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(6),r=s.n(a),o=(s(21),s(22),s(3)),i=s(2),l=s(1);function m(e){var t=Object(n.useState)(e.segment.name),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)(e.segment.size),o=Object(i.a)(r,2),m=o[0],b=o[1];return Object(n.useEffect)((function(){a(e.segment.name),b(e.segment.size)}),[e.segment]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"input-group row m-auto mt-3",children:[Object(l.jsxs)("div",{className:"col",children:[Object(l.jsx)("label",{className:"form-label mb-0",htmlFor:"segment-name",children:"Name"}),Object(l.jsx)("input",{id:"segment-name",className:"form-control",type:"text",value:c,onChange:function(e){a(e.target.value)}})]}),Object(l.jsxs)("div",{className:"col",children:[Object(l.jsx)("label",{className:"form-label mb-0",htmlFor:"segment-size",children:"Size"}),Object(l.jsx)("input",{id:"segment-size",className:"form-control",type:"number",min:1,value:m,onChange:function(e){b(e.target.value)}})]})]}),Object(l.jsx)("div",{className:"row m-auto p-0",children:Object(l.jsxs)("div",{className:"col input-group justify-content-between",children:[Object(l.jsx)("button",{className:"mt-1 btn btn-success w-80",onClick:function(){e.setSegment({name:c,size:parseInt(m)})},children:"Save Segment"}),Object(l.jsx)("button",{className:"mt-1 btn btn-danger w-20",onClick:e.removeSelf,children:Object(l.jsx)("i",{className:"fas fa-trash-alt"})})]})})]})}function b(e){var t=Object(n.useState)(e.process.name),s=Object(i.a)(t,2),c=s[0],a=s[1];Object(n.useEffect)((function(){}),[e.process]),Object(n.useEffect)((function(){a(e.process.name)}),[e.process]);var r=function(){var t={name:c,segments:Object(o.a)(e.process.segments)};e.updateProcess(t)},b=function(t){var s={name:c,segments:Object(o.a)(t)};e.updateProcess(s)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"h3",children:"Insert/Modify Process"}),Object(l.jsxs)("div",{className:"my-4",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{className:"mb-3 mx-1 btn btn-primary",onClick:function(){e.addProcess()},disabled:e.holeCount<1,children:"Add Process"}),Object(l.jsx)("button",{className:"mb-3 mx-1 btn btn-danger",onClick:function(){e.removeProcess()},disabled:e.processCount<=1,children:"Remove Process"})]}),Object(l.jsx)("label",{className:"form-label",htmlFor:"process-name",children:"Process Name"}),Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("input",{id:"process-name",className:"form-control",type:"text",value:c,onChange:function(e){a(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),r())},disabled:0===e.holeCount}),Object(l.jsx)("button",{className:"btn btn-success",onClick:r,disabled:0===e.holeCount,children:"Save"})]})]}),Object(l.jsx)("div",{className:"mt-4",children:Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){var t={name:c,segments:[].concat(Object(o.a)(e.process.segments),[{name:"",size:0}])};e.updateProcess(t)},disabled:0===e.holeCount,children:"Add Segment"})}),e.process.segments.map((function(t,s){return Object(l.jsx)(m,{index:s,segment:t,setSegment:function(t){var n=Object(o.a)(e.process.segments);n[s]=t,b(n)},removeSelf:function(){var t=e.process.segments;t.splice(s,1),b(t)}},s)}))]})}var j=s(12),u=s.n(j);function d(e){var t=Object(n.useState)(!0),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)(!0),o=Object(i.a)(r,2),m=o[0],b=o[1],j=Object(n.useState)("auto"),d=Object(i.a)(j,2),O=d[0],h=d[1],f=Object(n.useState)("auto"),p=Object(i.a)(f,2),v=p[0],g=p[1];Object(n.useEffect)((function(){h(!0===c?"auto":0)}),[c]),Object(n.useEffect)((function(){g(!0===m?"auto":0)}),[m]);var x=0;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"h6 mt-1",children:["Holes\u2003",Object(l.jsx)("span",{style:{cursor:"pointer"},onClick:function(){a(!c)},className:"link-primary",children:c?"[hide]":"[show]"})]}),Object(l.jsx)(u.a,{duration:500,height:O,children:e.holes.map((function(e,t){return Object(l.jsxs)("div",{className:"border border-1 rounded border-secondary",children:[Object(l.jsx)("div",{className:"row m-0 p-0",children:Object(l.jsxs)("div",{className:"col",children:["Hole ",t]})}),Object(l.jsxs)("div",{className:"row m-0 p-0 border-top border-1 border-secondary",children:[Object(l.jsxs)("div",{className:"col",children:["Start: ",e[0]]}),Object(l.jsxs)("div",{className:"col",children:["Size: ",e[1]]})]})]},x++)}))}),Object(l.jsxs)("div",{className:"h6 mt-2",children:["Processes\u2003",Object(l.jsx)("span",{style:{cursor:"pointer"},onClick:function(){b(!m)},className:"link-primary",children:m?"[hide]":"[show]"})]}),Object(l.jsx)(u.a,{duration:500,height:v,children:e.processes.map((function(t,s){return Object(l.jsxs)("div",{className:"border border-1 rounded border-secondary ".concat(e.selectedProcessIndex===s&&"bg-warning"),onClick:function(){e.selectProcess(s)},style:{cursor:"pointer"},children:[Object(l.jsx)("div",{className:"row m-0 p-0",children:Object(l.jsx)("div",{className:"col",children:t.name||Object(l.jsx)("div",{className:"fs-italic",children:"Unnamed Process"})})}),Object(l.jsx)("div",{className:"row m-0 p-0 border-top border-1 border-secondary",children:Object(l.jsxs)("div",{className:"col",children:["# Segments: ",t.segments.length]})})]},x++)}))})]})}var O=s(4),h=s(16),f="FIRST_FIT",p="BEST_FIT",v="WORST_FIT",g="OLD_PROCESS",x="HOLE",N="NEW_PROCESS",S=480;function y(e){return Object(l.jsx)("div",{className:e.type===g?"bg-warning":e.type===x?"bg-success":e.type===N?"bg-primary":""+e.index===0?"rounded-top":"",style:Object(O.a)(Object(O.a)({},e.style),{},{position:"absolute",top:"".concat(e.start,"px"),width:"100%",height:"".concat(e.size,"px"),display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"}),children:e.text})}var C=s(5),w=function(e,t,s,n,c){var a,r=[],i=[],l=[],m=[],b=[!0,[]];s.forEach((function(e,t){e.segments.forEach((function(s){r.push({processIndex:t,name:"".concat(e.name," - ").concat(s.name),size:s.size})}))})),n.forEach((function(e,t){i.push({type:x,name:"Hole ".concat(t),start:e[0],end:e[0]+e[1]})})),i.sort((function(e,t){return e.start-t.start}));for(var j=1;j<i.length;j++){var u=i[j-1],d=i[j];d.start>u.end&&l.push({type:g,name:"Old Process",start:u.end,end:d.start})}var h=i[0];h&&h.start>0&&l.push({type:g,name:"Old Process",start:0,end:h.start});var S=i[i.length-1];S&&S.end<e&&l.push({type:g,name:"Old Process",start:S.end,end:e});(a={},Object(C.a)(a,f,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=!1,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){for(var l=r.segments[o],j=l.size,u=0;u<c.length;u++){var d=c[u],O=d.end-d.start;if(j<=O){a.push({type:N,name:"".concat(r.name," - ").concat(l.name),start:d.start,end:d.start+j}),j===O?c.splice(u,1):c[u].start+=j,n=!0;break}}if(!1===n){t=!1;break}}!0===t?(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a))):b[0]=!1}})),Object(C.a)(a,p,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=void 0,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){n=!1;for(var l=r.segments[o],j=l.size,u=null,d=0;d<c.length;d++){var O=c[d],h=O.end-O.start;if(j<=h){if(null===u){u=d,n=!0;continue}var f=c[u];if(h<f.end-f.start){u=d,n=!0;continue}}}if(!1===n){t=!1;break}var p=c[u],v=p.end-p.start;a.push({type:N,name:"".concat(r.name," - ").concat(l.name),start:p.start,end:p.start+j}),v===j?c.splice(u,1):v>j&&(c[u].start+=j)}!0===t?(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a))):b[0]=!1}})),Object(C.a)(a,v,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=void 0,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){n=!1;for(var l=r.segments[o],j=l.size,u=null,d=0;d<c.length;d++){var O=c[d],h=O.end-O.start;if(j<=h){if(null===u){u=d,n=!0;continue}var f=c[u];if(h>f.end-f.start){u=d,n=!0;continue}}}if(!1===n){t=!1;break}var p=c[u],v=p.end-p.start;a.push({type:N,name:"".concat(r.name," - ").concat(l.name),start:p.start,end:p.start+j}),v===j?c.splice(u,1):v>j&&(c[u].start+=j)}!0===t?(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a))):b[0]=!0}})),a)[c](),console.log(l,i,m);var y=t/e;return b[1]=[].concat(l,Object(o.a)(i),Object(o.a)(m)).map((function(e){return Object(O.a)(Object(O.a)({},e),{},{start:e.start*y,end:e.end*y})})),b};function z(e){var t=Object(n.useState)(S),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)(null),o=Object(i.a)(r,2),m=o[0],b=o[1],j=Object(n.useState)([]),u=Object(i.a)(j,2),d=u[0],g=u[1];Object(n.useEffect)((function(){if(m){var t=w(e.memorySize,c,e.processes,e.holes,m.value),s=Object(i.a)(t,2),n=s[0],a=s[1];if(!1===n)return void alert("Failed to allocate processes to memory");g(a)}}),[c,m,e.memorySize,e.processes,e.holes]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(h.a,{value:m,onChange:function(e){b(e)},options:[{value:f,label:"First Fit"},{value:p,label:"Best Fit"},{value:v,label:"Worst Fit"}],styles:{option:function(e){return Object(O.a)(Object(O.a)({},e),{},{color:"black"})},menu:function(e){return Object(O.a)(Object(O.a)({},e),{},{marginTop:2})}},placeholder:"Allocation Method..."}),null!==m&&d.length>0&&Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"my-2 rounded-top",style:{position:"relative",height:"".concat(c,"px"),transition:".5s"},children:d.map((function(e,t){return Object(l.jsx)(y,{index:t,type:e.type,start:e.start,size:e.end-e.start,text:e.name,style:{transition:".5s"}},t)}))}),Object(l.jsx)("div",{onClick:function(){a(c===S?960:S)},children:Object(l.jsx)("i",{style:{width:"100%",cursor:"pointer"},className:"fas fa-arrow-"+(c===S?"down":"up")})})]})]})}function J(){var e=Object(n.useState)("2"),t=Object(i.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)(0),r=Object(i.a)(a,2),m=r[0],j=r[1],u=Object(n.useState)("0"),O=Object(i.a)(u,2),h=O[0],f=O[1],p=Object(n.useState)("1"),v=Object(i.a)(p,2),g=v[0],x=v[1],N=Object(n.useState)([]),S=Object(i.a)(N,2),y=S[0],C=S[1],w=Object(n.useState)([{name:"",segments:[]}]),J=Object(i.a)(w,2),k=J[0],P=J[1],F=Object(n.useState)(0),I=Object(i.a)(F,2),E=I[0],H=I[1],T=Object(n.useCallback)((function(e){e&&e.focus()}),[]),A=function(){var e=parseInt(s);isNaN(e)||j(e)};return Object(n.useEffect)((function(){E>=k.length?H(k.length-1):E<0&&H(0)}),[k,E]),0===m?Object(l.jsxs)("div",{className:"m-4",children:[Object(l.jsx)("label",{htmlFor:"memorySizeInput",className:"form-label mb-4 mw-80px",children:"Memory Size (in bytes)"}),Object(l.jsx)("input",{id:"memorySizeInput",className:"form-control m-auto mb-4 mw-80px w-60",type:"number",ref:T,value:s,onChange:function(e){c(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),A())}}),Object(l.jsx)("button",{className:"btn btn-success",onClick:A,children:"Submit"})]}):Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"row m-0 text-center justify-content-center",children:[Object(l.jsxs)("div",{className:"mt-4 col-6 col-md-4",children:[Object(l.jsx)("div",{className:"h3",children:"Insert Hole"}),Object(l.jsxs)("div",{className:"my-4",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"holeStart",children:"Starting Address"}),Object(l.jsx)("input",{id:"holeStart",className:"form-control",type:"number",min:0,value:h,ref:T,onChange:function(e){if(parseInt(e.target.value)<0)return!1;f(e.target.value)}})]}),Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"holeSize",children:"Size"}),Object(l.jsx)("input",{id:"holeSize",className:"form-control",type:"number",min:1,value:g,onChange:function(e){if(parseInt(e.target.value)<1)return!1;x(e.target.value)}})]}),Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){var e=parseInt(h),t=parseInt(g);if(isNaN(e)||isNaN(t))return alert("You must insert a valid hole parameters"),!1;if(e+t>m)return alert("A hole can't extend outside memory"),!1;var s=null;if(y.forEach((function(n){var c=Object(i.a)(n,2),a=c[0],r=c[1];e<=a&&e+t>=a&&(s=[a,r]),e>=a&&e<a+r&&(s=[a,r])})),null!=s)return alert("Hole overlaps with hole starting at ".concat(s[0]," with size ").concat(s[1])),!1;var n=[e,t],c=[].concat(Object(o.a)(y),[n]);C(c),f(""),x("")},children:"Insert Hole"})]}),Object(l.jsx)("div",{className:"mt-4 col-6 col-md-4",children:Object(l.jsx)(b,{process:k[E]&&k[E]||{name:"",segments:[]},addProcess:function(){var e=[].concat(Object(o.a)(k),[{name:"",segments:[]}]);H(k.length),P(e)},removeProcess:function(){var e=Object(o.a)(k);e.splice(E,1),P(e)},updateProcess:function(e){var t=Object(o.a)(k);t[E]=e,P(t)},holeCount:y.length,processCount:k.length})}),Object(l.jsxs)("div",{className:"mt-4 col-6 col-md-4",children:[Object(l.jsx)("div",{className:"mb-2",children:Object(l.jsx)(d,{memorySize:m,holes:y,processes:k,selectedProcessIndex:E,selectProcess:function(e){H(e)}})}),Object(l.jsx)("div",{className:"mt-2",children:Object(l.jsx)(z,{memorySize:m,processes:k,holes:y})})]})]})})}s(39);var k=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("div",{className:"container mw-94 mb-4",children:Object(l.jsx)(J,{})})})};r.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(k,{})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.474f926b.chunk.js.map