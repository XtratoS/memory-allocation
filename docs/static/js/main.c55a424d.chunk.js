(this["webpackJsonpmemory-alloc"]=this["webpackJsonpmemory-alloc"]||[]).push([[0],{20:function(e,t,s){},37:function(e,t,s){},38:function(e,t,s){"use strict";s.r(t);var n=s(0),c=s.n(n),a=s(5),r=s.n(a),o=(s(19),s(20),s(3)),i=s(2),l=s(1);function m(e){var t=Object(n.useState)(e.segment.name),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)(e.segment.size),o=Object(i.a)(r,2),m=o[0],b=o[1];return Object(n.useEffect)((function(){a(e.segment.name),b(e.segment.size)}),[e.segment]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"input-group row m-auto mt-3",children:[Object(l.jsxs)("div",{className:"col",children:[Object(l.jsx)("label",{className:"form-label mb-0",htmlFor:"segment-name",children:"Name"}),Object(l.jsx)("input",{id:"segment-name",className:"form-control",type:"text",value:c,onChange:function(e){a(e.target.value)}})]}),Object(l.jsxs)("div",{className:"col",children:[Object(l.jsx)("label",{className:"form-label mb-0",htmlFor:"segment-size",children:"Size"}),Object(l.jsx)("input",{id:"segment-size",className:"form-control",type:"number",min:1,value:m,onChange:function(e){b(e.target.value)}})]})]}),Object(l.jsx)("div",{className:"row m-auto p-0",children:Object(l.jsxs)("div",{className:"col input-group justify-content-between",children:[Object(l.jsx)("button",{className:"mt-1 btn btn-success w-80",onClick:function(){e.setSegment({name:c,size:parseInt(m)})},children:"Save Segment"}),Object(l.jsx)("button",{className:"mt-1 btn btn-danger w-20",onClick:e.removeSelf,children:Object(l.jsx)("i",{className:"fas fa-trash-alt"})})]})})]})}function b(e){var t=Object(n.useState)(e.process.name),s=Object(i.a)(t,2),c=s[0],a=s[1];Object(n.useEffect)((function(){}),[e.process]),Object(n.useEffect)((function(){a(e.process.name)}),[e.process]);var r=function(t){var s={name:c,segments:Object(o.a)(t)};e.updateProcess(s)};return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"h3",children:"Insert/Modify Process"}),Object(l.jsxs)("div",{className:"my-4",children:[Object(l.jsxs)("div",{children:[Object(l.jsx)("button",{className:"mb-3 mx-1 btn btn-primary",onClick:function(){e.addProcess()},disabled:e.holeCount<1,children:"Add Process"}),Object(l.jsx)("button",{className:"mb-3 mx-1 btn btn-danger",onClick:function(){e.removeProcess()},disabled:e.processCount<=1,children:"Remove Process"})]}),Object(l.jsx)("label",{className:"form-label",htmlFor:"process-name",children:"Process Name"}),Object(l.jsxs)("div",{className:"input-group",children:[Object(l.jsx)("input",{id:"process-name",className:"form-control",type:"text",value:c,onChange:function(e){a(e.target.value)},disabled:0===e.holeCount}),Object(l.jsx)("button",{className:"btn btn-success",onClick:function(){var t={name:c,segments:Object(o.a)(e.process.segments)};e.updateProcess(t)},disabled:0===e.holeCount,children:"Save"})]})]}),Object(l.jsx)("div",{className:"mt-4",children:Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){var t={name:c,segments:[].concat(Object(o.a)(e.process.segments),[{name:"",size:0}])};e.updateProcess(t)},disabled:0===e.holeCount,children:"Add Segment"})}),e.process.segments.map((function(t,s){return Object(l.jsx)(m,{index:s,segment:t,setSegment:function(t){var n=Object(o.a)(e.process.segments);n[s]=t,r(n)},removeSelf:function(){var t=e.process.segments;t.splice(s,1),r(t)}},s)}))]})}var j=s(14),u="FIRST_FIT",d="BEST_FIT",O="WORST_FIT",f="OLD_PROCESS",h="HOLE",p="NEW_PROCESS";function v(e){return Object(n.useEffect)((function(){}),[]),Object(l.jsx)("div",{className:(e.type===f?"bg-warning":e.type===h&&"bg-success")||e.type===p&&"bg-primary",style:{position:"absolute",top:"".concat(e.start,"px"),width:"100%",height:"".concat(e.size,"px"),display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold"},children:e.text})}var g=s(11),x=s(4),N=function(e,t,s,n,c){var a,r=[],i=[],l=[],m=[],b=[!0,[]];s.forEach((function(e,t){e.segments.forEach((function(s){r.push({processIndex:t,name:"".concat(e.name," - ").concat(s.name),size:s.size})}))})),n.forEach((function(e,t){i.push({type:h,name:"Hole ".concat(t),start:e[0],end:e[0]+e[1]})})),i.sort((function(e,t){return e.start-t.start}));for(var j=1;j<i.length;j++){var v=i[j-1],N=i[j];N.start>v.end&&l.push({type:f,name:"Old Process",start:v.end,end:N.start})}var S=i[0];S&&S.start>0&&l.push({type:f,name:"Old Process",start:0,end:S.start});var y=i[i.length-1];y&&y.end<e&&l.push({type:f,name:"Old Process",start:y.end,end:e});(a={},Object(x.a)(a,u,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=!1,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){for(var l=r.segments[o],b=l.size,j=0;j<c.length;j++){var u=c[j],d=u.end-u.start;if(b<=d){a.push({type:p,name:"".concat(r.name," - ").concat(l.name),start:u.start,end:u.start+b}),b===d?c.splice(j,1):c[j].start+=b,n=!0;break}}if(!1===n){t=!1;break}}!0===t&&(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a)))}})),Object(x.a)(a,d,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=void 0,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){n=!1;for(var l=r.segments[o],b=l.size,j=null,u=0;u<c.length;u++){var d=c[u],O=d.end-d.start;if(b<=O){if(null===j){j=u,n=!0;continue}var f=c[j];if(O<f.end-f.start){j=u,n=!0;continue}}}if(!1===n){t=!1;break}var h=c[j],v=h.end-h.start;a.push({type:p,name:"".concat(r.name," - ").concat(l.name),start:h.start,end:h.start+b}),v===b?c.splice(j,1):v>b&&(c[j].start+=b)}!0===t&&(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a)))}})),Object(x.a)(a,O,(function(){for(var e=0;e<s.length;e++){for(var t=!0,n=void 0,c=JSON.parse(JSON.stringify(i)),a=JSON.parse(JSON.stringify(m)),r=s[e],o=0;o<r.segments.length;o++){n=!1;for(var l=r.segments[o],b=l.size,j=null,u=0;u<c.length;u++){var d=c[u],O=d.end-d.start;if(b<=O){if(null===j){j=u,n=!0;continue}var f=c[j];if(O>f.end-f.start){j=u,n=!0;continue}}}if(!1===n){t=!1;break}var h=c[j],v=h.end-h.start;a.push({type:p,name:"".concat(r.name," - ").concat(l.name),start:h.start,end:h.start+b}),v===b?c.splice(j,1):v>b&&(c[j].start+=b)}!0===t&&(i=JSON.parse(JSON.stringify(c)),m=JSON.parse(JSON.stringify(a)))}})),a)[c](),console.log(l,i,m);var C=t/e;return b[1]=[].concat(l,Object(o.a)(i),Object(o.a)(m)).map((function(e){return Object(g.a)(Object(g.a)({},e),{},{start:e.start*C,end:e.end*C})})),b};function S(e){var t=Object(n.useRef)(600),s=Object(n.useState)(null),c=Object(i.a)(s,2),a=c[0],r=c[1],o=Object(n.useState)([]),m=Object(i.a)(o,2),b=m[0],f=m[1];Object(n.useEffect)((function(){if(a){var s=N(e.memorySize,t.current,e.processes,e.holes,a.value),n=Object(i.a)(s,2),c=n[0],r=n[1];if(!1===c)return void alert("Failed to allocate processes to memory");f(r)}}),[a,e.memorySize,e.processes,e.holes]),Object(n.useEffect)((function(){}),[b]);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)(j.a,{value:a,onChange:function(e){r(e)},options:[{value:u,label:"First Fit"},{value:d,label:"Best Fit"},{value:O,label:"Worst Fit"}],placeholder:"Allocation Method..."}),Object(l.jsx)("div",{className:"bg-danger",style:{position:"relative",height:"".concat(t.current,"px")},children:b.map((function(e,t){return Object(l.jsx)(v,{type:e.type,start:e.start,size:e.end-e.start,text:e.name},t)}))})]})}function y(e){var t=Object(n.useState)(!0),s=Object(i.a)(t,2),c=s[0],a=s[1],r=Object(n.useState)(!0),o=Object(i.a)(r,2),m=o[0],b=o[1],j=0;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)("div",{className:"h6 mt-1",children:["Holes\u2003",Object(l.jsx)("span",{style:{cursor:"pointer"},onClick:function(){a(!c)},className:"link-primary",children:c?"[hide]":"[show]"})]}),c&&e.holes.map((function(e,t){return Object(l.jsxs)("div",{className:"border border-1 rounded border-secondary",children:[Object(l.jsx)("div",{className:"row m-0 p-0",children:Object(l.jsxs)("div",{className:"col",children:["Hole ",t]})}),Object(l.jsxs)("div",{className:"row m-0 p-0 border-top border-1 border-secondary",children:[Object(l.jsxs)("div",{className:"col",children:["Start: ",e[0]]}),Object(l.jsxs)("div",{className:"col",children:["Size: ",e[1]]})]})]},j++)})),Object(l.jsxs)("div",{className:"h6 mt-2",children:["Processes\u2003",Object(l.jsx)("span",{style:{cursor:"pointer"},onClick:function(){b(!m)},className:"link-primary",children:m?"[hide]":"[show]"})]}),m&&e.processes.map((function(t,s){return Object(l.jsxs)("div",{className:"border border-1 rounded border-secondary ".concat(e.selectedProcessIndex===s&&"bg-warning"),onClick:function(){e.selectProcess(s)},style:{cursor:"pointer"},children:[Object(l.jsx)("div",{className:"row m-0 p-0",children:Object(l.jsx)("div",{className:"col",children:t.name||Object(l.jsx)("div",{className:"fs-italic",children:"Unnamed Process"})})}),Object(l.jsx)("div",{className:"row m-0 p-0 border-top border-1 border-secondary",children:Object(l.jsxs)("div",{className:"col",children:["# Segments: ",t.segments.length]})})]},j++)})),Object(l.jsx)(S,{memorySize:e.memorySize,processes:e.processes,holes:e.holes})]})}function C(){var e=Object(n.useState)("2"),t=Object(i.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)(0),r=Object(i.a)(a,2),m=r[0],j=r[1],u=Object(n.useState)("0"),d=Object(i.a)(u,2),O=d[0],f=d[1],h=Object(n.useState)("1"),p=Object(i.a)(h,2),v=p[0],g=p[1],x=Object(n.useState)([]),N=Object(i.a)(x,2),S=N[0],C=N[1],z=Object(n.useState)([{name:"",segments:[]}]),J=Object(i.a)(z,2),w=J[0],P=J[1],k=Object(n.useState)(0),F=Object(i.a)(k,2),I=F[0],E=F[1],H=Object(n.useCallback)((function(e){e&&e.focus()}),[]);Object(n.useEffect)((function(){}),[S]);var A=function(){var e=parseInt(s);isNaN(e)||j(e)};return Object(n.useEffect)((function(){I>=w.length?E(w.length-1):I<0&&E(0)}),[w,I]),0===m?Object(l.jsxs)("div",{className:"m-4",children:[Object(l.jsx)("label",{htmlFor:"memorySizeInput",className:"form-label mb-4 mw-80px",children:"Memory Size (in bytes)"}),Object(l.jsx)("input",{id:"memorySizeInput",className:"form-control m-auto mb-4 mw-80px w-60",type:"number",ref:H,value:s,onChange:function(e){c(e.target.value)},onKeyUp:function(e){"Enter"===e.key&&(e.preventDefault(),A())}}),Object(l.jsx)("button",{className:"btn btn-success",onClick:A,children:"Submit"})]}):Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("div",{className:"row m-0 text-center justify-content-center",children:[Object(l.jsxs)("div",{className:"mt-4 col-6 col-md-4",children:[Object(l.jsx)("div",{className:"h3",children:"Insert Hole"}),Object(l.jsxs)("div",{className:"my-4",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"holeStart",children:"Starting Address"}),Object(l.jsx)("input",{id:"holeStart",className:"form-control",type:"number",min:0,value:O,ref:H,onChange:function(e){if(parseInt(e.target.value)<0)return!1;f(e.target.value)}})]}),Object(l.jsxs)("div",{className:"mb-4",children:[Object(l.jsx)("label",{className:"form-label",htmlFor:"holeSize",children:"Size"}),Object(l.jsx)("input",{id:"holeSize",className:"form-control",type:"number",min:1,value:v,onChange:function(e){if(parseInt(e.target.value)<1)return!1;g(e.target.value)}})]}),Object(l.jsx)("button",{className:"btn btn-primary",onClick:function(){var e=parseInt(O),t=parseInt(v);if(isNaN(e)||isNaN(t))return alert("You must insert a valid hole parameters"),!1;if(e+t>m)return alert("A hole can't extend outside memory"),!1;var s=null;if(S.forEach((function(n){var c=Object(i.a)(n,2),a=c[0],r=c[1];e<=a&&e+t>=a&&(s=[a,r]),e>=a&&e<a+r&&(s=[a,r])})),null!=s)return alert("Hole overlaps with hole starting at ".concat(s[0]," with size ").concat(s[1])),!1;var n=[e,t],c=[].concat(Object(o.a)(S),[n]);C(c),f(""),g("")},children:"Insert Hole"})]}),Object(l.jsx)("div",{className:"mt-4 col-6 col-md-4",children:Object(l.jsx)(b,{process:w[I]&&w[I]||{name:"",segments:[]},addProcess:function(){var e=[].concat(Object(o.a)(w),[{name:"",segments:[]}]);E(w.length),P(e)},removeProcess:function(){var e=Object(o.a)(w);e.splice(I,1),P(e)},updateProcess:function(e){var t=Object(o.a)(w);t[I]=e,P(t)},holeCount:S.length,processCount:w.length})}),Object(l.jsx)("div",{className:"mt-4 col-6 col-md-4",children:Object(l.jsx)(y,{memorySize:m,holes:S,processes:w,selectedProcessIndex:I,selectProcess:function(e){E(e)}})})]})})}s(37);var z=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)("div",{className:"container mw-94 mb-4",children:Object(l.jsx)(C,{})})})};r.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(z,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.c55a424d.chunk.js.map